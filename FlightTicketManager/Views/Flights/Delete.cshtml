@model FlightTicketManager.Data.Entities.Flight

@{
    ViewData["Title"] = "Delete Flight";
}

<h1 class="text-center">@ViewData["Title"]</h1>

<div class="card-container">
    <div class="card">
        <h2 class="card-title text-center">Are you sure you want to delete this flight?</h2>
        <hr />

        <div class="mb-2">
            <strong>@Html.DisplayNameFor(model => model.FlightNumber)</strong>
            @Html.DisplayFor(model => model.FlightNumber)
        </div>
        
        <div class="mb-2">
            <strong>@Html.DisplayNameFor(model => model.DepartureDateTime)</strong>
            @Html.DisplayFor(model => model.DepartureDateTime)
        </div>
        
        <div class="mb-2">
            <strong>@Html.DisplayNameFor(model => model.FlightDuration)</strong>
            @Html.DisplayFor(model => model.FlightDuration)
        </div>
        
        <div class="mb-2">
            <strong>@Html.DisplayNameFor(model => model.Origin)</strong>
            @Html.DisplayFor(model => model.Origin.Name)
        </div>
        
        <div class="mb-2">
            <strong>@Html.DisplayNameFor(model => model.Destination)</strong>
            @Html.DisplayFor(model => model.Destination.Name)
        </div>
        
        <div class="mb-2">
            <strong>@Html.DisplayNameFor(model => model.Aircraft)</strong>
            @Html.DisplayFor(model => model.Aircraft.Data)
        </div>
        
        <div class="mb-2">
            <strong>@Html.DisplayNameFor(model => model.AvailableSeats)</strong>
            @Html.DisplayFor(model => model.AvailableSeats.Count)
        </div>
        
        <hr />
        <div>
            <button type="submit" id="btnDelete" class="btn btn-danger" style="width: auto">
                <i class="fa-solid fa-trash"></i> Delete
            </button>
            <a asp-action="Index" class="btn btn-secondary" style="width: auto">
                <i class="fa-solid fa-arrow-left"></i> Cancel
            </a>
        </div>
    </div>
</div>

<div id="deleteWithTicketsModal" class="modal fade" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Delete Confirmation</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>The flight <strong>@Model.FlightNumber</strong> has <strong>@Model.TicketsSold</strong> ticket(s) issued. Are you sure you want to delete it?</p>
            </div>
            <div class="modal-footer">
                <form asp-action="Delete">
                    <input type="hidden" asp-for="Id" />
                    <button type="submit" class="btn btn-danger" style="width: auto">
                        <i class="fa-solid fa-trash"></i> Yes, delete
                    </button>
                    <button type="button" class="btn btn-secondary" style="width: auto" data-dismiss="modal">
                        <i class="fa-solid fa-arrow-left"></i> No, cancel
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script type="text/javascript">
        $(document).ready(function () {
            // Show modal when clicking delete button for flight with tickets
            $("#btnDelete").click(function () {
                $("#deleteWithTicketsModal").modal("show");
            });
        });
    </script>
}